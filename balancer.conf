Listen 80 #HTTP

Listen 443 #HTTPS

<VirtualHost *:80>
        ServerAdmin $ADMINMAIL
        ServerName $SNAME
        ServerAlias $SALIAS
        ErrorLog ${APACHE_LOG_DIR}/error.log
        ProxyRequests off
        ProxyPreserveHost On
        <Location />
                ProxyPass http://pupusa:80/
                ProxyPassReverse http://pupusa:80/
        </Location>
</VirtualHost>
<VirtualHost *:443>
        ServerAdmin $ADMINMAIL
        ServerName $SNAME
        ServerAlias $SALIAS
        ProxyRequests off
        SSLEngine on
        SSLProxyEngine on
        ProxyPreserveHost On
        SSLProxyEngine on
        SSLCertificateKeyFile /etc/ssl/certs/dispositivo.key
        SSLCertificateFile /etc/ssl/certs/device.crt
        SSLCACertificateFile /etc/ssl/certs/cacert.pem
        <Location /compras/>
          ProxyPass https://compras:443/compras/
          ProxyPassReverse https://compras:443/compras/
        </Location>
        
        <Location /intranet/>
                ProxyPass https://intranet:443/intranet/
                ProxyPassReverse https://intranet:443/intranet/
                SSLVerifyClient require
</Location>
</VirtualHost>
