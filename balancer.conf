Listen 80 #HTTP

Listen 443 #HTTPS

<VirtualHost *:80>
        ServerAdmin $ADMINMAIL
        ServerName $SNAME
        ServerAlias $SALIAS
        ErrorLog ${APACHE_LOG_DIR}/error.log
        ProxyRequests off
        ProxyPreserveHost On
        <Proxy balancer://pupusa>
                $PUPUSAS
                ProxySet lbmethod=byrequests
        </Proxy>
        <Location />
                ProxyPass balancer://pupusa/
                ProxyPassReverse balancer://pupusa/
        </Location>
</VirtualHost>
<VirtualHost *:443>
        ServerAdmin $ADMINMAIL
        ServerName $SNAME
        ServerAlias $SALIAS
        ProxyRequests off
        SSLEngine on
        SSLProxyEngine on
        ProxyPreserveHost On
        SSLProxyEngine on
        SSLCertificateKeyFile /etc/ssl/certs/dispositivo.key
        SSLCertificateFile /etc/ssl/certs/device.crt
        SSLCACertificateFile /etc/ssl/certs/cacert.pem
        <Proxy balancer://compras>
                $COMPRASVARIAS
                ProxySet lbmethod=byrequests
        </Proxy>
        <Proxy balancer://intranet>
                $INTRAMUROS
                ProxySet lbmethod=byrequests
        </Proxy>
        <Location /compras.php>
          ProxyPass balancer://compras/ 
          ProxyPassReverse balancer://compras/
        </Location>
        
        <Location /intranet.php>
                ProxyPass balancer://intranet/
                ProxyPassReverse balancer://intranet/
                SSLVerifyClient require
</Location>
</VirtualHost>
